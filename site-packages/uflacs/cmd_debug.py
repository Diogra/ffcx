
def testelementmapping(args): # TODO: Maybe modify and add as ufl unit test?
    from ufl import quadrilateral
    from ufl.algorithms import load_ufl_file, extract_elements
    filenames = args
    for fn in filenames:
        print "Loading file '%s'..." % (fn,)
        data = load_ufl_file(fn)
        for form in data.forms:
            # Build a hack of an element mapping for testing
            element_mapping = {}
            for e in extract_elements(form):
                e2 = e.reconstruct(family="Discontinuous Lagrange", cell=quadrilateral)
                element_mapping[e] = e2
            print element_mapping

            form.compute_form_data(element_mapping=element_mapping)
            form_data = form.form_data()
            print form_data.elements
            print [e.family() for e in form_data.elements]
    return 0

def add_debug_options(opts):
    "Args: list of .ufl filenames."
    pass

def run_debug(options, args):
    "For use while developing. Run whatever debugging code has currently been implemented here."
    testelementmapping(args)
